(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~81d34ca2"],{"1e63":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"card p-3"},[a("div",{staticClass:"card-block"},[a("h5",[e._v("Add User")]),a("form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{type:"email","error-messages":e.errors.collect("email"),"data-vv-name":"email",label:"Email"},on:{keypress:function(t){return e.AvoidSpace(t)}},model:{value:e.account.email,callback:function(t){e.$set(e.account,"email",t)},expression:"account.email"}})],1),a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-vv-name":"name","error-messages":e.errors.collect("name"),type:"text",label:"Name"},model:{value:e.account.name,callback:function(t){e.$set(e.account,"name",t)},expression:"account.name"}})],1),a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-vv-name":"username","error-messages":e.errors.collect("username"),type:"text",label:"Username"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1),a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"password",attrs:{"data-vv-name":"account.password","error-messages":e.errors.collect("account.password"),type:"password",label:"Password"},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password",t)},expression:"account.password"}})],1),a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:"+e.account.password,expression:"`required|confirmed:${account.password}`"}],attrs:{"data-vv-name":"confirmation_password","error-messages":e.errors.collect("confirmation_password"),type:"password",label:"Confirmation Password"},model:{value:e.account.rpassword,callback:function(t){e.$set(e.account,"rpassword",t)},expression:"account.rpassword"}})],1),a("v-flex",{attrs:{xs12:"","px-4":"","py-1":""}},[a("v-autocomplete",{attrs:{"item-value":"roleId","item-text":"roleName",items:e.roles,label:"Roles"},model:{value:e.account.role,callback:function(t){e.$set(e.account,"role",t)},expression:"account.role"}})],1),a("v-flex",{staticClass:"text-right",attrs:{xs12:"","px-4":"","py-2":""}},[a("v-btn",{attrs:{round:"",disabled:e.loading,color:"#3498db",dark:""},on:{click:e.handleSubmit}},[e._v("Add User")])],1)],1)],1)])])])},s=[],n=(a("3d20"),a("2b0e")),i={data:function(){return{company_list:[],roles:[],account:{email:"",name:"",username:"",password:"",rpassword:"",company_id:"",channel:"WEB",role:null},loading:!1,submitted:!1}},methods:{AvoidSpace:function(e){var t=e?e.which:window.event.keyCode;if(32==t)return e.preventDefault(),!1},handleSubmit:function(){var e=this;this.submitted=!0,this.$validator.validateAll().then((function(t){t&&n["default"].$http.post("/user/addUser",e.account).then((function(t){"00"==t.errorCode?(e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}),e.$router.push({name:"user.list"})):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}))},loadRolePermission:function(){var e=this;this.$http.post("/permission/getRole",{}).then((function(t){"00"==t.errorCode&&(e.roles=t.data)}))}},mounted:function(){this.loadRolePermission()}},o=i,l=a("2877"),c=a("6544"),d=a.n(c),u=a("c6a6"),m=a("8336"),p=a("0e8f"),v=a("a722"),f=a("2677"),g=Object(l["a"])(o,r,s,!1,null,null,null);t["default"]=g.exports;d()(g,{VAutocomplete:u["a"],VBtn:m["a"],VFlex:p["a"],VLayout:v["a"],VTextField:f["a"]})},a3e3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pl-5 pr-5 pt-2"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-12"},[a("ul",{staticClass:"breadCrumbs"},[e._m(0),a("li",[a("router-link",{attrs:{to:"/report/list"}},[e._v("Reports")])],1),e._m(1),a("div",{staticClass:"clear"})])])]),e.errorMsg?e._e():a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-3"},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"Date From",label:"From","prepend-icon":"event",readonly:"","error-messages":e.errors.first("Date From")},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}},r))]}}],null,!1,2893869314),model:{value:e.dateMenuFrom,callback:function(t){e.dateMenuFrom=t},expression:"dateMenuFrom"}},[a("v-date-picker",{attrs:{max:e.endDate},on:{input:function(t){e.dateMenuFrom=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),a("div",{staticClass:"col-md-3"},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"Date Until",label:"Until","prepend-icon":"event",readonly:"","error-messages":e.errors.first("Date Until")},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}},r))]}}],null,!1,4055421905),model:{value:e.dateMenuTo,callback:function(t){e.dateMenuTo=t},expression:"dateMenuTo"}},[a("v-date-picker",{attrs:{min:e.startDate},on:{input:function(t){e.dateMenuTo=!1}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1),a("div",{staticClass:"col-md-3"},[a("v-text-field",{attrs:{name:"Msisdn",label:"Msisdn"},model:{value:e.msisdn,callback:function(t){e.msisdn=t},expression:"msisdn"}})],1),a("div",{staticClass:"col-md-2"},[a("v-btn",{attrs:{round:"",color:"#3498db",dark:""},on:{click:e.navigateToSearch}},[e._v("Search")])],1)]),a("div",{staticClass:"row pb-2"},[a("div",{staticClass:"col-md-2"},[a("v-btn",{attrs:{round:"",color:"#3498db",dark:""}},[a("download-excel",{attrs:{fetch:e.fetchData,fields:e.json_fields,type:"csv",name:"USSD.xls"}},[e._v("Download Excel")])],1)],1)]),a("div",[a("v-data-table",{attrs:{headers:e.headers,items:e.tableData,pagination:e.pagination,"total-items":e.pagination.totalItems,"rows-per-page-items":[10]},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.msisdn?t.item.msisdn:"-"))]),a("td",[e._v(e._s(t.item.type?t.item.type:"-"))]),a("td",[e._v(e._s(t.item.ussdString?t.item.ussdString:"-"))]),a("td",[e._v(e._s(t.item.inputType?t.item.inputType:"-"))]),a("td",[e._v(e._s(t.item.created?t.item.created:"-"))])]}},{key:"no-results",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v('Your search for "'+e._s(e.search)+'" found no results.')])]},proxy:!0}],null,!1,744714986)})],1)]),e.errorMsg?a("div",[a("div",{staticClass:"card",staticStyle:{width:"100%",height:"100%"}},[a("div",{staticClass:"card-block p-5"},[a("h3",[e._v(e._s(e.errorMsg))])])])]):e._e()])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("a",{staticClass:"animation",attrs:{href:"",title:"Home"}},[e._v("Home")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"activePage"},[a("p",{staticClass:"animation",attrs:{href:"",title:"USSD"}},[e._v("USSD")])])}],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=(a("96cf"),a("3b8d")),o=a("c1df"),l=a.n(o),c=a("025e");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={data:function(){return{search:"",json_fields:{Number:{field:"msisdn",callback:function(e){return e||"-"}},Type:{field:"type",callback:function(e){return e||"-"}},"Dialled String":{field:"ussdString",callback:function(e){return e||"-"}},"Input Type":{field:"inputType",callback:function(e){return e||"-"}},"Date & Time":{field:"created",callback:function(e){return e||"-"}}},items:[],pagination:{page:1,rowsPerPage:10,totalPages:void 0,totalItems:void 0},errorMsg:"",headers:[{text:"Number",value:"Number",sortable:!1},{text:"Type",value:"Type",sortable:!1},{text:"Dialled String",value:"DialledString",sortable:!1},{text:"Input Type",value:"inputType",sortable:!1},{text:"Date & Time",value:"DateTime",sortable:!1}],consentReport:[],exportData:[],dateMenuFrom:!1,dateMenuTo:!1,msisdn:"",startDate:l()().format("YYYY-MM-DD"),endDate:l()().format("YYYY-MM-DD")}},watch:{pagination:function(e,t){this.navigateToSearch()},"$route.query":function(){this.getReport()}},methods:{fetchData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getReport(!0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),navigateToSearch:function(){var e=this;this.$router.push({name:"report.ussd",query:u({page:this.pagination.page,rowsPerPage:this.pagination.rowsPerPage,startDate:this.startDate,endDate:this.endDate},this.msisdn&&{msisdn:this.msisdn})}).catch((function(t){e.$router.push("/"),e.$router.push({name:"report.ussd",query:u({page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage,startDate:e.startDate,endDate:e.endDate},e.msisdn&&{msisdn:e.msisdn})})}))},getReport:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s=this,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.setModelFromQueryParams(),!(this.pagination.page&&this.pagination.rowsPerPage&&this.startDate&&this.endDate)){e.next=8;break}return a={startDate:this.startDate,endDate:this.endDate,msisdn:this.msisdn,pageNumber:this.pagination.page,pageSize:t?999999:this.pagination.rowsPerPage},r=c["a"].getQueryString(a),e.next=7,this.$http.get(window.ReportBaseURL+"/reportdaily/ussdLogs"+r).then((function(e){"00"==e.errorCode?t?s.exportData=e.data.content:(s.consentReport=e.data.content,s.pagination.totalPages=e.data.totalPages,s.pagination.totalItems=e.data.totalElements):"53"==e.errorCode&&(s.errorMsg=e.errorMsg)}));case 7:return e.abrupt("return",this.exportData);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setModelFromQueryParams:function(){var e=this.$route.query;e&&(this.pagination.page=e.page?e.page:this.pagination.page,this.pagination.rowsPerPage=e.rowsPerPage?e.rowsPerPage:this.pagination.rowsPerPage,this.startDate=e.startDate?e.startDate:l()().subtract(1,"months").format("YYYY-MM-DD"),this.endDate=e.endDate?e.endDate:l()().format("YYYY-MM-DD"),this.msisdn=e.msisdn)}},computed:{tableData:function(){return this.consentReport.map((function(e){return e.consentSentTime=l()(e.consentSentTime,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY HH:mm:ss"),e.consentExpiryTime=l()(e.consentExpiryTime,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY HH:mm:ss"),e}))}},mounted:function(){}},p=m,v=a("2877"),f=a("6544"),g=a.n(f),h=a("0798"),b=a("8336"),x=a("8fea"),D=a("2e4b"),w=a("e449"),y=a("2677"),_=Object(v["a"])(p,r,s,!1,null,null,null);t["default"]=_.exports;g()(_,{VAlert:h["a"],VBtn:b["a"],VDataTable:x["a"],VDatePicker:D["a"],VMenu:w["a"],VTextField:y["a"]})}}]);