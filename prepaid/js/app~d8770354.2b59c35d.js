(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~d8770354"],{"0d5f":function(t,e,s){},2684:function(t,e,s){"use strict";s("3d9c")},"29f5":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-block"},[s("v-tabs",{attrs:{left:""}},[s("v-tab",[t._v("Child Profile")]),s("div",{staticClass:"v-tabs__div"},[s("a",{staticClass:"v-tabs__item v-tabs__item--active",staticStyle:{position:"static"},on:{click:function(e){return t.goToParentProfile()}}},[t._v("Main User")])]),s("v-tab-item",{key:"tabChildProfile"},[s("v-container",{attrs:{fluid:""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"col-md-12"},[s("h3",[t._v("User Profile")])]),s("div",{staticClass:"col-md-12 mt-3"},[s("span",[t._v("MSISDN: "+t._s(t.childAccount.childProfile.msisdn))])]),s("div",{staticClass:"col-md-12 mt-3"},[s("span",[t._v("SEGMENT: "+t._s(t.childAccount.childProfile.subType))])]),s("div",{staticClass:"col-md-12 mt-3"},[s("span",[t._v("PRICE PLAN: "+t._s(t.childAccount.childProfile.originalPricePlan))])]),s("div",{staticClass:"col-md-12 mt-3"},["ACTIVE"==t.childAccount.childProfile.status?s("v-btn",{attrs:{type:"button",round:"",disabled:t.loading,color:"rgb(254,173,33)"},on:{click:function(e){return t.UnsubscribeChild(t.childAccount)}}},[t._v("Unsubscribe")]):t._e(),"PENDING_CBS"==t.childAccount.childProfile.status||"CBS_NOT_UPDATE"==t.childAccount.childProfile.status?s("v-btn",{attrs:{type:"button",round:"",disabled:t.loading,color:"rgb(254,173,33)"},on:{click:function(e){return t.terminateChild(t.childAccount)}}},[t._v("Terminate")]):t._e()],1)]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"table-responsive mt-3"},[t.childAccount&&(t.childAccount.childMonthlyBalance&&t.childAccount.childMonthlyBalance.length>0||t.childAccount.childOneTimeBalance&&t.childAccount.childOneTimeBalance.length>0)?s("table",{staticClass:"table table-bordered table-striped small"},[s("tbody",[s("tr",{staticClass:"table-primary"},[s("th",[t._v("Allocated Resource")]),s("th",[t._v("Remaining Resources")]),s("th",[t._v("Type")]),s("th",[t._v("Allocation Date")]),s("th",[t._v("Expiry Date")])]),t._l(t.childAccount.childMonthlyBalance,(function(e,a){return s("tr",{key:"product_alo"+a},[s("td",[t._v(t._s(t.getTotalQuota(e)))]),s("td",[t._v(t._s(t.getRemainingQuota(e)))]),s("td",[t._v("Monthly Sharing")]),s("td",[t._v(t._s(t._f("formatDate")(e.applyDate)))]),s("td",[t._v(t._s(t._f("formatDate")(e.expiryDate)))])])})),t._l(t.childAccount.childOneTimeBalance,(function(e,a){return s("tr",{key:"product_rem"+a},[s("td",[t._v(t._s(t.getTotalQuota(e)))]),s("td",[t._v(t._s(t.getRemainingQuota(e)))]),s("td",[t._v("One Time Bundle Sharing")]),s("td",[t._v(t._s(t._f("formatDate")(e.applyDate)))]),s("td",[t._v(t._s(t._f("formatDate")(e.expiryDate)))])])}))],2)]):t._e()])])]),s("div",{staticClass:"row mt-3"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"table-responsive"},[t.childTransactionDetails&&t.childTransactionDetails.length>0?s("table",{staticClass:"table table-bordered table-striped small"},[s("tbody",[s("tr",{staticClass:"table-primary"},[s("th",[t._v("Parent Number")]),s("th",[t._v("Child Number")]),s("th",[t._v("Subscriber Type")]),s("th",[t._v("Activity Type")]),s("th",[t._v("Event Type")]),s("th",[t._v("Date & Time")]),s("th",[t._v("Request Channel")]),s("th",[t._v("System Id")]),s("th",[t._v("Resources Type")]),s("th",[t._v("Quota Allocated")]),s("th",[t._v("Old Price Plan")]),s("th",[t._v("New Price Plan")]),s("th",[t._v("Event Status")]),s("th",[t._v("Updated Child Resources")]),s("th",[t._v("Updated Parents Resources")]),s("th",[t._v("TransactionId")])]),t._l(t.childTransactionDetails,(function(e,a){return s("tr",{key:"childTransactionDetail"+a},[s("td",[t._v(t._s(e.transactionDetails.parentDetails?e.transactionDetails.parentDetails.msisdn:"NA"))]),s("td",[t._v(t._s(e.transactionDetails.childDetails?e.transactionDetails.childDetails.msisdn:"NA"))]),s("td",[t._v(t._s(t.IsParentOpCode(e.transactionDetails.opcodeDetails.opcode)?"PARENT":"CHILD"))]),s("td",[t._v(t._s(e.transactionDetails.opcodeDetails.description))]),s("td",[t._v(t._s(e.eventDetails.eventDescription))]),s("td",[t._v(t._s(e.created))]),s("td",[t._v(t._s(e.transactionDetails.channel))]),s("td",[t._v(t._s(e.transactionDetails.userDetails?e.transactionDetails.userDetails.username:"NA"))]),s("td",[t._v(t._s(e.productDetails?e.productDetails.productName:"NA"))]),s("td",[t._v(t._s(e.convertedAllocationAmount?e.convertedAllocationAmount:"NA"))]),s("td",[t._v(t._s(e.oldPricePlan?e.oldPricePlan:"NA"))]),s("td",[t._v(t._s(e.newPricePlan?e.newPricePlan:"NA"))]),s("td",[t._v(t._s(e.eventStatus?e.eventStatus:"NA"))]),s("td",[t._v(t._s(e.convertedNewChildBalance?e.convertedNewChildBalance:"NA"))]),s("td",[t._v(t._s(e.convertedNewParentBalance?e.convertedNewParentBalance:"NA"))]),s("td",[t._v(t._s(e.transactionDetails.systemTransactionId?e.transactionDetails.systemTransactionId:"NA"))])])}))],2)]):t._e()])])])])],1)],1)],1)])])},r=[],i=(s("6762"),s("2fdb"),s("7f7f"),s("ac6a"),s("a481"),s("3d20")),n=s.n(i),o=s("2b0e"),l=s("025e"),c={data:function(){return{childAccount:{childProfile:{pricePlanDetails:{}}},mainAccount:{parentProfile:{}},parentMsisdn:"",childMsisdn:"",loading:!1,submitted:!1,childTransactionDetails:[]}},methods:{getTotalQuota:function(t){var e="";return e="BYTE"==t.productDetails.quotaUnit?this.formatBytes(t.totalQuota)+" "+t.productDetails.productName.replace("Internet","MBs"):"SECOND"==t.productDetails.quotaUnit?l["a"].convertSecondsToMins(t.totalQuota)+" "+t.productDetails.productName:t.totalQuota+" "+t.productDetails.productName,e},getRemainingQuota:function(t){var e="";return e="BYTE"==t.productDetails.quotaUnit?this.formatBytes(t.remainingQuota)+" "+t.productDetails.productName.replace("Internet","MBs"):"SECOND"==t.productDetails.quotaUnit?l["a"].convertSecondsToMins(t.remainingQuota)+" "+t.productDetails.productName:t.remainingQuota+" "+t.productDetails.productName,e},getChildProfile:function(){var t=this;return new Promise((function(e){var s={childMsisdn:t.childMsisdn};o["default"].$http.post("/child/getChildProfile",s).then((function(s){"00"==s.errorCode&&(t.childAccount=s.data,e())}))}))},getMainProfile:function(){var t=this,e={parentMsisdn:this.parentMsisdn};o["default"].$http.post("/parent/getParentProfile",e).then((function(e){"00"==e.errorCode&&(t.mainAccount=e.data)}))},formatBytes:function(t){return l["a"].formatBytes(t)},goToParentProfile:function(){this.$router.push({name:"parentProfile"})},UnsubscribeChild:function(t){"PREPAID"==t.childProfile.subType?this.unsubprepaid(t):this.unsubpostpaid(t)},terminateChild:function(t){var e=this;n.a.fire({text:"ARE YOU SURE YOU WANT TO TERMINATE?",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#e74c3c",customClass:"swal-wide",confirmButtonText:"YES",reverseButtons:!0,cancelButtonText:"NO"}).then((function(t){if(t.value){var s={parentMsisdn:e.parentMsisdn,childMsisdn:e.childMsisdn};o["default"].$http.post("/child/terminateCrmPendingChild",s).then((function(t){"00"==t.errorCode?e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}}))},unsubprepaid:function(t){var e=this;n.a.fire({text:"ARE YOU SURE YOU WANT TO UNSUBSCRIBE?",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#e74c3c",customClass:"swal-wide",confirmButtonText:"YES",reverseButtons:!0,cancelButtonText:"NO"}).then((function(t){if(t.value){var s={parentMsisdn:e.parentMsisdn,childMsisdn:e.childMsisdn};o["default"].$http.post("/child/unsubChild",s).then((function(t){"00"==t.errorCode?e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}}))},unsubpostpaid:function(){var t=this;n.a.fire({title:"ARE YOU SURE YOU WANT TO UNSUBSCRIBE?",input:"select",inputOptions:this.getOtherPricePlan(),inputPlaceholder:"SELECT OTHER PLAN",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#e74c3c",customClass:"swal-wide",confirmButtonText:"UNSUBSCRIBE",reverseButtons:!0,cancelButtonText:"CANCEL",inputValidator:function(e){return new Promise((function(s){var a=void 0;a=e?{parentMsisdn:t.parentMsisdn,childMsisdn:t.childMsisdn,newPricePlanId:e}:{parentMsisdn:t.parentMsisdn,childMsisdn:t.childMsisdn},o["default"].$http.post("/child/unsubChild",a).then((function(e){"00"==e.errorCode?t.$store.commit("notis/setAlert",{type:"success",title:e.errorMsg,time:"4"}):t.$store.commit("notis/setAlert",{type:"error",title:e.errorMsg,time:"4"})})),s()}))}})},getOtherPricePlan:function(){var t=this;return new Promise((function(e){var s={parentMsisdn:t.parentMsisdn,typeOfPricePlan:"PREPAID"};o["default"].$http.post("/general/getOtherPricePlan",s).then((function(t){if("00"==t.errorCode){var s={};t.data.forEach((function(t){s[t.id]=t.name})),e(s)}}))}))},getChildTransactionDetails:function(){var t=this,e={childId:this.childAccount.childProfile.id,startDate:"",endDate:"",opcodeId:""};o["default"].$http.post("/transaction/getChildEventDetails",e).then((function(e){"00"==e.errorCode&&(t.childTransactionDetails=e.data)}))},IsParentOpCode:function(t){return!!["ADD_PARENT","REMOVE_PARENT","CHANGE_PRICE_PLAN"].includes(t)}},mounted:function(){var t=this;this.parentMsisdn=sessionStorage.getItem("ParentMSISDN")?sessionStorage.getItem("ParentMSISDN"):void 0,this.childMsisdn=sessionStorage.getItem("ChildMSISDN")?sessionStorage.getItem("ChildMSISDN"):void 0,this.getChildProfile().then((function(){t.getChildTransactionDetails()})),this.getMainProfile()}},d=c,u=(s("7ea4"),s("2877")),p=s("6544"),m=s.n(p),h=s("8336"),f=s("a523"),v=s("71a3"),C=s("c671"),P=s("fe57"),g=Object(u["a"])(d,a,r,!1,null,"1c43fd5d",null);e["default"]=g.exports;m()(g,{VBtn:h["a"],VContainer:f["a"],VTab:v["a"],VTabItem:C["a"],VTabs:P["a"]})},"3d9c":function(t,e,s){},"4c53":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card col-sm-12 col-md-8 col-lg-6 p-3"},[s("div",{staticClass:"card-block"},[s("h5",[t._v("Create User")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.handleFpCreateUser.apply(null,arguments)}}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"","px-2":"","py-1":""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-4"},[s("span",{staticClass:"text-left numbering mt-4"},[t._v("1.")]),s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{pattern:"^\\d{11}$",type:"text","error-messages":t.errors.collect("MSISDN"),"data-vv-name":"MSISDN",label:"Enter MSISDN",disabled:""},model:{value:t.fpAccount.parentMsisdn,callback:function(e){t.$set(t.fpAccount,"parentMsisdn",e)},expression:"fpAccount.parentMsisdn"}})],1)])]),s("v-flex",{attrs:{xs12:"","px-2":"","py-1":""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-11"},[s("span",{staticClass:"text-left numbering"},[t._v("2.")]),s("h5",[t._v("SELECT ONE OF THE FOLLOWING PLANS:")]),s("v-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"pl-5",attrs:{"error-messages":t.errors.collect("Family Plan"),"data-vv-name":"Family Plan"},model:{value:t.fpAccount.pricePlanId,callback:function(e){t.$set(t.fpAccount,"pricePlanId",e)},expression:"fpAccount.pricePlanId"}},t._l(t.familyPlans,(function(e){return s("v-radio",{key:e.id,attrs:{value:e.id}},[s("template",{slot:"label"},[s("div",{staticClass:"row mt-4"},[s("span",{staticClass:"col-md-12 text-uppercase"},[t._v(t._s(e.cbsPlanNameParent))]),s("span",{staticClass:"col-md-12"},[t._v(" Resources : "),t._l(e.productList,(function(e,a){return s("span",{key:"product"+a},[2!=e.isShareable?s("span",[0!=a?s("span",[t._v(",")]):t._e(),t._v(" "+t._s(t.getProductValue(e)+" "+e.productInfo.productName.replace("Internet","MBs"))+" ")]):t._e()])}))],2)])])],2)})),1)],1)])]),s("v-flex",{staticClass:"text-right",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{ref:"refTosubmit",attrs:{type:"submit",round:"",disabled:t.loading,color:"#3498db",dark:""}},[t._v("Submit")])],1)],1)],1)])])])},r=[],i=(s("3d20"),s("2b0e")),n=(s("56d7"),s("025e")),o={data:function(){return{fpAccount:{parentMsisdn:"",pricePlanId:void 0},familyPlans:[],loading:!1,submitted:!1}},methods:{handleFpCreateUser:function(){var t=this;this.submitted=!0;var e=this;this.$validator.validateAll().then((function(s){s&&i["default"].$http.post("/parent/provisionParent",t.fpAccount).then((function(s){"00"==s.errorCode?(t.$store.commit("notis/setAlert",{type:"success",title:s.errorMsg,time:"4"}),e.$router.push({name:"parentProfile"})):t.$store.commit("notis/setAlert",{type:"error",title:s.errorMsg,time:"4"})}))}))},getFPPricePlan:function(){var t=this;i["default"].$http.post("/general/getFPPricePlan",{}).then((function(e){"00"==e.errorCode&&(t.familyPlans=e.data,t.fpAccount.pricePlanId=t.familyPlans[0].id)}))},getProductValue:function(t){return"BYTE"==t.productInfo.quotaUnit?this.formatBytes(t.amount):"SECOND"==t.productInfo.quotaUnit?n["a"].convertSecondsToMins(t.amount):t.amount},formatBytes:function(t){return n["a"].formatBytes(t)}},created:function(){},computed:{},mounted:function(){var t=this;this.fpAccount.parentMsisdn=sessionStorage.getItem("ParentMSISDN")?sessionStorage.getItem("ParentMSISDN"):void 0,this.getFPPricePlan(),this.$nextTick((function(){return t.$refs.refTosubmit.$el.focus()}))}},l=o,c=(s("f349"),s("2877")),d=s("6544"),u=s.n(d),p=s("8336"),m=s("0e8f"),h=s("a722"),f=s("67b6"),v=s("43a6"),C=s("2677"),P=Object(c["a"])(l,a,r,!1,null,"30955bfe",null);e["default"]=P.exports;u()(P,{VBtn:p["a"],VFlex:m["a"],VLayout:h["a"],VRadio:f["a"],VRadioGroup:v["a"],VTextField:C["a"]})},"5b04":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card col-md-4 p-3"},[s("div",{staticClass:"card-block"},[t.createNewFF||t.requestPending?t._e():s("div",[s("div",[s("v-btn",{attrs:{color:"#3498db",dark:"",id:"back-button"},on:{click:t.goBack}},[s("v-icon",{attrs:{dark:"",left:""}},[t._v("arrow_back")]),t._v(" Back ")],1)],1),s("h5",[t._v("FP Search")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.handleFpSearch.apply(null,arguments)}}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"","px-5":"","py-5":""}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],attrs:{pattern:"^\\d{11}$",type:"text","error-messages":t.errors.collect("MSISDN"),"data-vv-name":"MSISDN",label:"Enter MSISDN",autofocus:""},on:{keypress:function(e){return t.IsNumber(e)}},model:{value:t.fpSearch.userMsisdn,callback:function(e){t.$set(t.fpSearch,"userMsisdn",e)},expression:"fpSearch.userMsisdn"}}),s("v-btn-toggle",{model:{value:t.userStatus,callback:function(e){t.userStatus=e},expression:"userStatus"}},[s("v-btn",{attrs:{flat:"",value:"parent"}},[t._v("Parent")]),s("v-btn",{attrs:{flat:"",value:"child"}},[t._v("Child")])],1)],1),s("v-flex",{staticClass:"text-right",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{attrs:{type:"submit",round:"",disabled:t.loading,color:"#3498db",dark:""}},[t._v(" Find ")])],1)],1)],1)]),t.createNewFF?s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-5":"","py-5":""}},[s("p",{staticClass:"lead"},[t._v(" "+t._s(t.fpSearch.userMsisdn.substring(0,4)+" "+t.fpSearch.userMsisdn.substring(4,11))+" is not a "+t._s(t.selectedFpUserType)+" Family Plan User ")])]),s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{staticClass:"mr-2",staticStyle:{width:"120px"},attrs:{type:"button",round:"",disabled:t.loading,color:"#e74c3c",dark:""},on:{click:function(e){return t.CancelCreateUser()}}},[t._v("Cancel")]),s("v-btn",{ref:"refToCreateNew",staticStyle:{width:"120px"},attrs:{round:"",disabled:t.loading,color:"#3498db",dark:""},on:{click:t.handleCreateNewFPU}},[t._v("Create User")])],1)],1):t._e(),t.requestPending?s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-5":"","py-5":""}},[s("p",{staticClass:"lead"},[t._v("Subscription request sent, Check back later.")])]),s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{ref:"refToSubscriptionRequestSent",attrs:{round:"",disabled:t.loading,color:"#3498db",dark:""},on:{click:t.handleSubscriptionRequestSent}},[t._v("OK")])],1)],1):t._e()],1)])])},r=[],i=(s("a481"),s("3d20"),s("2b0e")),n=s("025e"),o=s("96ca"),l=s("a73b"),c={data:function(){return{fpSearch:{userMsisdn:""},loading:!1,submitted:!1,createNewFF:!1,requestPending:!1,fpUserTypes:o["a"],ApiUrls:l["a"],selectedFpUserType:"",basePrepaidUrl:"",userStatus:"parent"}},methods:{handleFpSearch:function(){var t=this;this.submitted=!0;var e=this;this.$validator.validateAll().then((function(s){if(s)switch(t.selectedFpUserType){case e.fpUserTypes.PREPAID:t.resolveMsisdnPrepaid(e);break;case e.fpUserTypes.POSTPAID:console.log("Querying postpaid user"),t.resolveMsisdnPostpaid(e);break;default:t.goBack()}}))},resolveMsisdnPrepaid:function(t){var e=this,s=t.fpSearch.userMsisdn;i["default"].$http.get("".concat(this.basePrepaidURL,"/user/getSubscriberType?parentMsisdn=").concat(s)).then((function(a){console.log(a),"Prepaid"===a?(sessionStorage.setItem("ParentMSISDN",s),t.$router.push({name:"prepaidParentProfile"})):e.$store.commit("notis/setAlert",{type:"error",title:"Not a subscriber",time:"4"})}),(function(t){e.$store.commit("notis/setAlert",{type:"error",title:t,time:"4"})}))},resolveMsisdnPostpaid:function(t){var e=this;i["default"].$http.post("/parent/getMsisdnStatus",t.fpSearch).then((function(s){"00"==s.errorCode?"NEW"==s.data.status?(sessionStorage.setItem("ParentMSISDN",e.fpSearch.userMsisdn),t.createNewFF=!0,t.requestPending=!1,t.$nextTick((function(){return t.$refs.refToCreateNew.$el.focus()}))):"PENDING"==s.data.status?(t.createNewFF=!1,t.requestPending=!0,t.$nextTick((function(){return t.$refs.refToSubscriptionRequestSent.$el.focus()}))):"SUSPENDED"==s.data.status||"BLOCKED"==s.data.status||"PP_BLACKLISTED"==s.data.status?e.$store.commit("notis/setAlert",{type:"error",title:"Nmber is "+s.data.status.replace("PP_",""),time:"4"}):"PARENT"==s.data.type?(sessionStorage.setItem("ParentMSISDN",e.fpSearch.userMsisdn),t.$router.push({name:"parentProfile"})):"CHILD"==s.data.type&&(sessionStorage.setItem("ParentMSISDN",s.data.parentMsisdn),sessionStorage.setItem("ChildMSISDN",e.fpSearch.userMsisdn),t.$router.push({name:"childProfile"})):e.$store.commit("notis/setAlert",{type:"error",title:s.errorMsg,time:"4"})}))},handleCreateNewFPU:function(){var t=this;if(this.selectedFpUserType===this.fpUserTypes.POSTPAID){var e=sessionStorage.getItem("ParentMSISDN"),s={parentMsisdn:e};i["default"].$http.post("/parent/isMsisdnEligibleForFP",s).then((function(e){"00"==e.errorCode?e.data.isSubscribed?t.provisionParent():t.$router.push({name:"createfpuser"}):t.$store.commit("notis/setAlert",{type:"error",title:e.errorMsg,time:"4"})}))}},provisionParent:function(){var t=this,e=sessionStorage.getItem("ParentMSISDN"),s={parentMsisdn:e,pricePlanId:""};i["default"].$http.post("/parent/provisionParent",s).then((function(e){"00"==e.errorCode?(t.$store.commit("notis/setAlert",{type:"success",title:e.errorMsg,time:"4"}),t.$router.push({name:"parentProfile"})):t.$store.commit("notis/setAlert",{type:"error",title:e.errorMsg,time:"4"})}))},handleSubscriptionRequestSent:function(){this.fpSearch.userMsisdn="",this.createNewFF=!1,this.requestPending=!1},IsNumber:function(t){return n["a"].isNumber(t)},CancelCreateUser:function(){sessionStorage.removeItem("ParentMSISDN"),this.fpSearch.userMsisdn="",this.createNewFF=!1,this.requestPending=!1},goBack:function(){this.$router.push({name:"fpUserType"})}},mounted:function(){this.basePrepaidURL=sessionStorage.getItem(this.ApiUrls.BASE_PREPAID_URL_KEY),this.basePrepaidUrl||console.log("Base Prepaid URL: ".concat(sessionStorage.getItem(this.ApiUrls.BASE_PREPAID_URL_KEY))),this.selectedFpUserType=sessionStorage.getItem(this.fpUserTypes.STORAGE_KEY),this.selectedFpUserType||this.goBack()},beforeDestroy:function(){}},d=c,u=(s("ef16"),s("2877")),p=s("6544"),m=s.n(p),h=s("8336"),f=s("a609"),v=s("0e8f"),C=s("132d"),P=s("a722"),g=s("2677"),_=Object(u["a"])(d,a,r,!1,null,"f709f63c",null);e["default"]=_.exports;m()(_,{VBtn:h["a"],VBtnToggle:f["a"],VFlex:v["a"],VIcon:C["a"],VLayout:P["a"],VTextField:g["a"]})},"68b9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.childAccounts,(function(e,a){return s("div",{key:"child"+a,staticClass:"row",class:{redish:"ACTIVE"!=e.childProfile.status}},[s("form",{staticClass:"col-md-12 pl-3 pr-3",on:{submit:function(s){return s.preventDefault(),t.handleFpChileUser(e,a)}}},[s("div",{staticClass:"row pt-2"},[s("div",{staticClass:"col-md-12"},[s("h5",{staticClass:"single-line user-heading"},[t._v("USER "+t._s(("0"+(a+1)).slice(-2))+" PROFILE")]),e.childProfile.id?s("span",{staticClass:"cursor-pointer",attrs:{title:"Edit"},on:{click:function(s){return t.canEdit(e)}}},[s("i",{staticClass:"material-icons"},[t._v("edit")])]):t._e(),s("span",{staticClass:"cursor-pointer pl-2",attrs:{title:"Delete"},on:{click:function(s){return t.DeleteChild(e)}}},[s("i",{staticClass:"material-icons"},[t._v("delete_forever")])]),"ACTIVE"==e.childProfile.status?s("span",{staticClass:"cursor-pointer pl-2",attrs:{title:"Unsubscribe"},on:{click:function(s){return t.UnsubscribeChild(e)}}},[s("i",{staticClass:"material-icons"},[t._v("link_off")])]):t._e(),"PENDING_CBS"==e.childProfile.status?s("span",{staticClass:"cursor-pointer pl-2",attrs:{title:"terminate"},on:{click:function(s){return t.terminateChild(e)}}},[s("i",{staticClass:"material-icons"},[t._v("link_off")])]):t._e()]),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[e.childProfile.id?t._e():s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],attrs:{pattern:"^\\d{11}$",type:"text","error-messages":t.errors.collect("MSISDN"+a),"data-vv-name":"MSISDN"+a,"data-vv-as":"MSISDN",label:"MSISDN"},on:{keypress:function(e){return t.IsNumber(e)}},model:{value:e.childProfile.msisdn,callback:function(s){t.$set(e.childProfile,"msisdn",s)},expression:"child.childProfile.msisdn"}}),e.childProfile.id?s("h5",{staticClass:"mt-3"},[t._v(" MSISDN: "+t._s(e.childProfile.msisdn)+" "),s("span",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-updateUser",modifiers:{"modal-updateUser":!0}}],staticClass:"pl-2 cursor-pointer",attrs:{title:"Update MSISDN"},on:{click:function(s){return t.ChangeNumber(e)}}},[s("i",{staticClass:"material-icons"},[t._v("edit")])])]):t._e()],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[[s("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel1,callback:function(s){t.$set(e,"panel1",s)},expression:"child.panel1"}},[s("v-expansion-panel-content",{key:"v-expansion-panel-content_1",scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"font-weight-bold"},[t._v(" MONTHLY SHARING "),s("br"),s("span",{staticClass:"small"},[t._v("(WILL BE POSTED ON MONTHLY RENEWAL)")])])]},proxy:!0}],null,!0)},[s("v-card",[s("div",{key:"MONTHLY_SHARING_KEY"+t.componentKey,staticClass:"row pl-2 pr-2"},[t._l(t.selectedPricePlan.productList,(function(r,i){return[1==r.isShareable?s("div",{key:"product"+i,staticClass:"col-sm-6"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"#########",expression:"'#########'"}],attrs:{id:"child_monthly"+(e.childProfile.id?e.childProfile.id:a)+"_"+r.productId,value:t.getChildMonthlyBalance(e,r),type:"text",disabled:!e.canChange,"error-messages":t.errors.collect(""+(r.productInfo.productName+a)),title:"Enter Value","data-vv-name":""+(r.productInfo.productName+a),"data-vv-as":r.productInfo.productName,suffix:"= "+t.getChildAllocationPct(r,e,a)+" %"},on:{keypress:function(e){return t.IsValidValue(e,r)}}},[s("template",{slot:"label"},[s("label",{staticStyle:{"font-size":"0.8em"}},[t._v(t._s(r.productInfo.productName))])])],2)],1):t._e()]}))],2)])],1)],1)],[s("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel2,callback:function(s){t.$set(e,"panel2",s)},expression:"child.panel2"}},[s("v-expansion-panel-content",{key:"v-expansion-panel-content_2",scopedSlots:t._u([{key:"header",fn:function(){return[s("div",{staticClass:"font-weight-bold"},[t._v(" ONE-TIME SHARING "),s("br"),s("span",{staticClass:"small"},[t._v("(WILL BE POSTED INSTANTLY AND WILL NOT BE RENEWAL)")])])]},proxy:!0}],null,!0)},[s("v-card",[s("div",{key:"ONE-TIME_SHARING_kEY"+t.componentKey,staticClass:"row pl-2 pr-2"},[t._l(t.parentMonthlyBalance,(function(r,i){return[1==r.isFPService?s("div",{key:"product"+i,staticClass:"col-sm-6"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"######",expression:"'######'"}],attrs:{id:"child_onetime"+(e.childProfile.id?e.childProfile.id:a)+"_"+r.parentProductId.productId,value:0,pattern:"^\\d*",type:"text","error-messages":t.errors.collect(r.productDetails.productName+"OT"+a),title:"Enter Value","data-vv-name":r.productDetails.productName+"OT"+a,disabled:!e.canChange,"data-vv-as":r.productDetails.productName},on:{keypress:function(e){return t.IsNumber(e)}}},[s("template",{slot:"label"},[s("label",{staticStyle:{"font-size":"0.8em"}},[t._v(t._s(r.productDetails.productName))])])],2)],1):t._e()]}))],2)])],1)],1)]],2)])]),e.childProfile.id?s("div",{staticClass:"col-md-7 align-self-center"},[e.childMonthlyBalance&&e.childMonthlyBalance.length>0||e.childOneTimeBalance&&e.childOneTimeBalance.length>0?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered-outside table-striped small"},[s("tbody",[t._m(0,!0),t._l(e.childMonthlyBalance,(function(e,a){return s("tr",{key:"product_alo"+a},[s("td",[t._v(t._s(t.getTotalQuota(e)))]),s("td",[t._v(t._s(t.getRemainingQuota(e)))]),s("td",[t._v("Monthly Sharing")]),s("td",[t._v(t._s(t._f("formatDate")(e.applyDate)))]),s("td",[t._v(t._s(t._f("formatDate")(e.expiryDate)))])])})),t._l(e.childOneTimeBalance,(function(e,a){return s("tr",{key:"product_rem"+a},[s("td",[t._v(t._s(t.getTotalQuota(e)))]),s("td",[t._v(t._s(t.getRemainingQuota(e)))]),s("td",[t._v("One Time Bundle Sharing")]),s("td",[t._v(t._s(t._f("formatDate")(e.applyDate)))]),s("td",[t._v(t._s(t._f("formatDate")(e.expiryDate)))])])}))],2)])])])]):t._e(),s("div",{staticClass:"row"})]):t._e(),e.canChange?s("div",{staticClass:"col-md-12 text-right"},[s("v-btn",{staticClass:"mr-2",staticStyle:{width:"100px"},attrs:{type:"button",round:"",disabled:t.loading,color:"#e74c3c"},on:{click:function(s){return t.stopEdit(e)}}},[t._v("Cancel")]),s("v-btn",{staticStyle:{width:"100px"},attrs:{type:"submit",round:"",disabled:t.IsSaveDisabled(e,a),color:"#3498db"}},[t._v("Save")])],1):t._e()])]),s("hr",{staticStyle:{width:"100%",border:"1px solid #007bff"},attrs:{size:"50"}})])})),t.childAccounts.length<t.numberOfLines-1?s("div",{staticClass:"row pl-4"},[s("i",{staticClass:"material-icons font-lg cursor-pointer",on:{click:function(e){return t.addChild()}}},[t._v("add_circle_outline")]),s("span",{staticClass:"text-uppercase pl-2 pt-3"},[s("h5",[t._v("add user "+t._s(("0"+(t.childAccounts.length+1)).slice(-2)))])])]):t._e(),s("b-modal",{ref:"modal",attrs:{id:"modal-updateUser",size:"sm",title:"UPDATE USER:"},on:{ok:t.handleOk},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel,r=e.ok;return[s("v-btn",{staticClass:"my-cancel-btn",attrs:{type:"reset",small:!0,round:"",disabled:t.loading},on:{click:function(t){return a()}}},[t._v("Cancel")]),s("v-btn",{staticClass:"my-save-btn",attrs:{type:"submit",small:!0,round:"",disabled:t.loading},on:{click:function(t){return r()}}},[t._v("Save")])]}}])},[s("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.updateUserMSISDN.apply(null,arguments)}}},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"############",expression:"'############'"}],attrs:{pattern:"^\\d{12}$",type:"text","error-messages":t.errors.collect("Existing MSISDN"),"data-vv-name":"Existing MSISDN",label:"Existing MSISDN",autofocus:"",disabled:""},on:{keypress:function(e){return t.IsNumber(e)}},model:{value:t.changeChildMSISDN.oldChildMsisdn,callback:function(e){t.$set(t.changeChildMSISDN,"oldChildMsisdn",e)},expression:"changeChildMSISDN.oldChildMsisdn"}}),s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:"###########",expression:"'###########'"}],attrs:{pattern:"^\\d{11}$",type:"text","error-messages":t.errors.collect("New MSISDN"),"data-vv-name":"New MSISDN",label:"New MSISDN"},on:{keypress:function(e){return t.IsNumber(e)}},model:{value:t.changeChildMSISDN.newChildMsisdn,callback:function(e){t.$set(t.changeChildMSISDN,"newChildMsisdn",e)},expression:"changeChildMSISDN.newChildMsisdn"}})],1)])],2)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"table-primary"},[s("th",[t._v("Allocated Resource")]),s("th",[t._v("Remaining Resources")]),s("th",[t._v("Type")]),s("th",[t._v("Allocation Date")]),s("th",[t._v("Expiry Date")])])}],i=(s("7514"),s("5df3"),s("ac6a"),s("6762"),s("2fdb"),s("a481"),s("c5f6"),s("3d20")),n=s.n(i),o=s("2b0e"),l=s("025e"),c={props:{parentMsisdn:String,parentId:String,numberOfLines:Number,parentMonthlyBalance:{},selectedPricePlan:{}},data:function(){return{componentKey:0,changeChildMSISDN:{parentMsisdn:"",oldChildMsisdn:"",newChildMsisdn:""},childInChange:{},childDetail:{canChange:!0,panel1:[!0],panel2:[!0],childProfile:{id:"",msisdn:""},childMonthlyBalance:[{childProductId:{childId:"",productId:""},monthlyQuota:0,totalQuota:0,remainingQuota:0}],childOneTimeBalance:[{childProductId:{childId:"",productId:""},monthlyQuota:0,totalQuota:0,remainingQuota:0}]},childDataToPost:{parentMsisdn:"",childDetails:[{childMsisdn:"",monthlyQuota:[{productId:"",quota:void 0,unit:"ACTUAL"}]}]},childAccounts:[],products:[],monthlyQuota:[],OTQuota:[],loading:!1,submitted:!1}},methods:{getTotalQuota:function(t){var e="";return e="BYTE"==t.productDetails.quotaUnit?this.formatBytesToMbs(t.totalQuota)+" "+t.productDetails.productName.replace("Internet","MBs"):"SECOND"==t.productDetails.quotaUnit?l["a"].convertSecondsToMins(t.totalQuota)+" "+t.productDetails.productName:t.totalQuota+" "+t.productDetails.productName,e},getRemainingQuota:function(t){var e="";return e="BYTE"==t.productDetails.quotaUnit?this.formatBytesToMbs(t.remainingQuota)+" "+t.productDetails.productName.replace("Internet","MBs"):"SECOND"==t.productDetails.quotaUnit?l["a"].convertSecondsToMins(t.remainingQuota)+" "+t.productDetails.productName:t.remainingQuota+" "+t.productDetails.productName,e},forceRerender:function(){this.componentKey+=1},canEdit:function(t){t.canChange=!0,t.panel1=[!0],t.panel2=[!0],this.forceRerender()},stopEdit:function(t){t.childProfile.id?(t.canChange=!1,t.panel1=[!1],t.panel2=[!1]):(this.childAccounts.splice(this.childAccounts.indexOf(t),1),this.emitChildDeleted()),this.forceRerender()},IsNumber:function(t){return l["a"].isNumber(t)},IsValidValue:function(t,e){var s=e.amount;return"BYTE"==e.productInfo.quotaUnit?s=this.formatBytesToMbs(s):"SECOND"==e.productInfo.quotaUnit&&(s=l["a"].convertSecondsToMins(s)),l["a"].isNumber(t,s)},DeleteChild:function(t){var e=this;n.a.fire({text:"ARE YOU SURE YOU WANT TO DELETE?",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#fd2222",customClass:"swal-wide",confirmButtonText:"YES",reverseButtons:!0,cancelButtonText:"NO"}).then((function(s){if(s.value)if(t.childProfile.id){var a={parentMsisdn:e.parentMsisdn,childMsisdn:t.childProfile.msisdn};o["default"].$http.post("/child/deleteChildFromParent",a).then((function(s){"00"==s.errorCode?(e.$store.commit("notis/setAlert",{type:"success",title:s.errorMsg,time:"4"}),e.childAccounts.splice(e.childAccounts.indexOf(t),1),e.emitChildDeleted()):e.$store.commit("notis/setAlert",{type:"error",title:s.errorMsg,time:"4"})}))}else e.childAccounts.splice(e.childAccounts.indexOf(t),1),e.emitChildDeleted(),e.$store.commit("notis/setAlert",{type:"success",title:"Successfull delete child",time:"4"})}))},UnsubscribeChild:function(t){var e=this;n.a.fire({text:"ARE YOU SURE YOU WANT TO UNSUBSCRIBE?",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#fd2222",customClass:"swal-wide",confirmButtonText:"YES",reverseButtons:!0,cancelButtonText:"NO"}).then((function(s){if(s.value&&t.childProfile.id){var a={parentMsisdn:e.parentMsisdn,childMsisdn:t.childProfile.msisdn};o["default"].$http.post("/child/unsubChild",a).then((function(t){"00"==t.errorCode?e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}}))},terminateChild:function(t){var e=this;n.a.fire({text:"ARE YOU SURE YOU WANT TO TERMINATE?",showCancelButton:!0,confirmButtonColor:"#feae23",cancelButtonColor:"#fd2222",customClass:"swal-wide",confirmButtonText:"YES",reverseButtons:!0,cancelButtonText:"NO"}).then((function(s){if(s.value&&t.childProfile.id){var a={parentMsisdn:e.parentMsisdn,childMsisdn:t.childProfile.msisdn};o["default"].$http.post("/child/terminateCrmPendingChild",a).then((function(t){"00"==t.errorCode?e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}}))},handleFpChileUser:function(t,e){var s=this,a=this;this.validateForm(t,e).then((function(r){if(!r.includes(!1)){var i=JSON.parse(JSON.stringify(s.childDataToPost)),n=s.getmonthlyQuota(t,e),l=s.getOTQuota(t,e);i.parentMsisdn=s.parentMsisdn,i.childDetails=[{childMsisdn:t.childProfile.msisdn,monthlyQuota:n,OTQuota:l}],t.childProfile.id?(s.submitted=!0,o["default"].$http.post("/child/updateChildQuota",i).then((function(e){"00"==e.errorCode?(s.$store.commit("notis/setAlert",{type:"success",title:e.errorMsg,time:"4"}),a.getChildProfile(t).then((function(e){t.childProfile=e.childProfile,t.childMonthlyBalance=e.childMonthlyBalance,t.childOneTimeBalance=e.childOneTimeBalance})),t.canChange=!1,t.panel1=[!1],t.panel2=[!1],a.forceRerender()):s.$store.commit("notis/setAlert",{type:"error",title:e.errorMsg,time:"4"})}))):(s.submitted=!0,o["default"].$http.post("/child/addChildToParent",i).then((function(e){"00"==e.errorCode?(s.$store.commit("notis/setAlert",{type:"success",title:e.errorMsg,time:"4"}),t.canChange=!1,t.panel1=[!1],t.panel2=[!1],a.getChildProfile(t).then((function(e){t.childProfile=e.childProfile,t.childMonthlyBalance=e.childMonthlyBalance,t.childOneTimeBalance=e.childOneTimeBalance})),a.forceRerender()):s.$store.commit("notis/setAlert",{type:"error",title:e.errorMsg,time:"4"})})))}}))},validateForm:function(t,e){var s=this,a=[];return t.childProfile.id||a.push(this.$validator.validate("MSISDN"+e,t.msisdn)),this.selectedPricePlan.productList.forEach((function(r){if(1==r.isFPService){var i="",n=document.getElementById("child_monthly"+(t.childProfile.id?t.childProfile.id:e)+"_"+r.productId);n&&n.value&&(i=n.value),a.push(s.$validator.validate(r.productInfo.productName+e,i))}})),this.parentMonthlyBalance.forEach((function(r){if(1==r.isFPService){var i="",n=document.getElementById("child_onetime"+(t.childProfile.id?t.childProfile.id:e)+"_"+r.parentProductId.productId);n&&n.value&&(i=n.value),a.push(s.$validator.validate(r.productDetails.productName+"OT"+e,i))}})),Promise.all(a)},updateUserMSISDN:function(){var t=this,e=this;this.$validator.validateAll().then((function(s){s&&(e.changeChildMSISDN.oldChildMsisdn==e.changeChildMSISDN.newChildMsisdn?t.$nextTick((function(){t.$store.commit("notis/setAlert",{type:"error",title:"New msisdns and old msisdn is same",time:"4"})})):(t.$nextTick((function(){t.$refs.modal.hide()})),o["default"].$http.post("/child/replaceChildOfParent",e.changeChildMSISDN).then((function(s){"00"==s.errorCode?(t.$store.commit("notis/setAlert",{type:"success",title:s.errorMsg,time:"4"}),e.forceRerender()):t.$store.commit("notis/setAlert",{type:"error",title:s.errorMsg,time:"4"})}))))}))},handleOk:function(t){t.preventDefault(),this.updateUserMSISDN()},addChild:function(){this.childAccounts.push(JSON.parse(JSON.stringify(this.childDetail))),this.emitChildAdded()},getChildsOfParent:function(t){var e=this,s={parentMsisdn:t};o["default"].$http.post("/parent/getChildsOfParent",s).then((function(t){"00"==t.errorCode&&(e.childAccounts=t.data.childDetails,e.childAccounts.forEach((function(t){t.canChange=!1,t.panel1=[!1],t.panel2=[!1]})))}))},getChildProfile:function(t){return new Promise((function(e,s){var a={childMsisdn:t.childProfile.msisdn};o["default"].$http.post("/child/getChildProfile",a).then((function(t){"00"==t.errorCode?e(t.data):s(t.errorMsg)}))}))},getmonthlyQuota:function(t,e){var s=this;return this.monthlyQuota=[],this.parentMonthlyBalance.forEach((function(a){if("1"==a.isFPService){var r=0,i=document.getElementById("child_monthly"+(t.childProfile.id?t.childProfile.id:e)+"_"+a.parentProductId.productId);i&&(r=parseInt(i.value,10)),r=s.convertToInternalUnits(a.productDetails.quotaUnit,r);var n=0;if(t.childMonthlyConfig){var o=t.childMonthlyConfig.find((function(t){return t.childProductId.productId==a.parentProductId.productId}));o&&(n=o.monthlyQuota)}if(n!=r||window.SendAllChildResources){var l={productId:a.parentProductId.productId,quota:r,unit:"ACTUAL"};s.monthlyQuota.push(l)}}})),this.monthlyQuota},getOTQuota:function(t,e){var s=this;return this.OTQuota=[],this.parentMonthlyBalance.forEach((function(a){if("1"==a.isFPService){var r=0,i=document.getElementById("child_onetime"+(t.childProfile.id?t.childProfile.id:e)+"_"+a.parentProductId.productId);if(i&&(r=parseInt(i.value,10)),r=s.convertToInternalUnits(a.productDetails.quotaUnit,r),r>0||window.SendAllChildResources){var n={productId:a.parentProductId.productId,quota:r,unit:"ACTUAL"};s.OTQuota.push(n)}}})),this.OTQuota},IsSaveDisabled:function(t){var e=this,s=!0;return t.childProfile.id?(this.parentMonthlyBalance.forEach((function(e){if(1==e.isFPService){var a="",r=document.getElementById("child_onetime"+t.childProfile.id+"_"+e.parentProductId.productId);r&&r.value&&(a=r.value,a>0&&(s=!1))}})),this.selectedPricePlan&&this.selectedPricePlan.productList.forEach((function(a){var r=void 0,i=e.getChildMonthlyBalance(t,a),n=document.getElementById("child_monthly"+t.childProfile.id+"_"+a.productId);n&&(n.value?r=parseInt(n.value,10):s=!0,r>=0&&r!=i&&(s=!1))}))):s=!1,s},getChildAllocationPct:function(t,e,s){var a="0.00",r=document.getElementById("child_monthly"+(e.childProfile.id?e.childProfile.id:s)+"_"+t.productId);return r&&r.value&&(a=parseInt(r.value,10)),t.amount>0?(a=this.convertToInternalUnits(t.productInfo.quotaUnit,a),a=(a/t.amount*100).toFixed(2)):a="0.00",a},getChildMonthlyBalance:function(t,e){var s=0;if(t.childMonthlyConfig){var a=t.childMonthlyConfig.find((function(t){return t.childProductId.productId==e.productId}));a&&(s=this.convertToDisplayUnits(a.productDetails.quotaUnit,a.monthlyQuota))}return s},ChangeNumber:function(t){this.changeChildMSISDN={parentMsisdn:this.parentMsisdn,oldChildMsisdn:t.childProfile.msisdn,newChildMsisdn:""},this.childInChange=t},emitChildAdded:function(){this.$emit("childAdded")},convertToDisplayUnits:function(t,e){return"BYTE"==t?e=this.formatBytesToMbs(e):"SECOND"==t&&(e=this.convertSecondsToMins(e)),e},convertToInternalUnits:function(t,e){return"BYTE"==t?e=this.formatMBsToBytes(e):"SECOND"==t&&(e=this.convertMinsToSeconds(e)),e},emitChildDeleted:function(){this.$emit("childDeleted")},formatBytesToMbs:function(t){return l["a"].formatBytes(t)},convertSecondsToMins:function(t){return l["a"].convertSecondsToMins(t)},convertMinsToSeconds:function(t){return l["a"].convertMinsToSeconds(t)},formatMBsToBytes:function(t){return l["a"].formatMBsToBytes(t)}},mounted:function(){this.getChildsOfParent(this.parentMsisdn)}},d=c,u=(s("e781"),s("2877")),p=s("6544"),m=s.n(p),h=s("8336"),f=s("b0af"),v=s("cd55"),C=s("49e2"),P=s("2677"),g=Object(u["a"])(d,a,r,!1,null,"17322b55",null);e["default"]=g.exports;m()(g,{VBtn:h["a"],VCard:f["a"],VExpansionPanel:v["a"],VExpansionPanelContent:C["a"],VTextField:P["a"]})},"6ae9":function(t,e,s){var a={"./ChangePasswordComponent.vue":"e546","./ChildViewComponent.vue":"29f5","./ChildsProfileComponent.vue":"68b9","./CreateFPUserComponent.vue":"4c53","./FPSearchComponent.vue":"5b04","./FPUserTypeComponent.vue":"b8e1","./LoginComponent.vue":"6b78","./ParentProfileComponent.vue":"02ab","./PrepaidChildProfileComponent.vue":"9839","./PrepaidParentProfileComponent.vue":"dfe6","./UserHistoryComponent.vue":"357d","./reports/AgentActivityComponent.vue":"01b4","./reports/AgentLoginComponent.vue":"3455","./reports/DailyConsentComponent.vue":"fde9","./reports/DashboardReportComponent.vue":"219c","./reports/HierarchyComponent.vue":"ffda","./reports/ParentRenewalSummaryComponent.vue":"e848","./reports/ParentReportComponent.vue":"4832","./reports/PrepaidGroupsEditComponent.vue":"1061","./reports/PrepaidHierarchyComponent.vue":"b8fb","./reports/PrepaidLoginComponent.vue":"ad89","./reports/PrepaidMsisdnComponent.vue":"f74a","./reports/PrepaidProfileAccessComponent.vue":"770d","./reports/PrepaidResourceSharingComponent.vue":"5755","./reports/PrepaidSubscriptionComponent.vue":"55e1","./reports/PrepaidTransactionComponent.vue":"9fb0","./reports/PrepaidUssdComponent.vue":"9a29","./reports/ProfileAccessComponent.vue":"4096","./reports/ProfileChangesComponent.vue":"3026","./reports/RenewalComponent.vue":"f9b3","./reports/ReportListComponent.vue":"4721","./reports/ResourceSharingComponent.vue":"87c4","./reports/SubscriptionComponent.vue":"36f9","./reports/TransactionComponent.vue":"8de2","./reports/UssdComponent.vue":"a3e3","./user/AddUserComponent.vue":"1e63","./user/DashboardUserComponent.vue":"36a3","./user/EditUserComponent.vue":"5ea9","./user/ListUserComponent.vue":"1d0e","./user/UserProfileComponent.vue":"9aaa"};function r(t){var e=i(t);return s(e)}function i(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id="6ae9"},"6b78":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"login-block",staticStyle:{background:"#00bcd4"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("form",{staticClass:"md-float-material form-material",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[t._m(0),s("div",{staticClass:"auth-box card"},[s("div",{staticClass:"card-block"},[t._m(1),s("div",{staticClass:"form-group form-primary"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",name:"username","data-vv-name":"username","error-messages":t.errors.collect("username"),label:"Username",focus:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("div",{staticClass:"form-group form-primary"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",name:"password","data-vv-name":"password","error-messages":t.errors.collect("password"),label:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{attrs:{type:"submit",round:"",disabled:t.loggingIn,color:"#3498db",dark:""}},[t._v("Login")])],1),s("div",{staticClass:"row m-t-25 text-left"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"forgot-phone text-center float-center"},[s("a",{staticClass:"text-right f-w-600",attrs:{href:"javascript:void(0);"},on:{click:t.resetPassword}},[t._v("Forgot Password?")])])])]),s("hr")],1)])])])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"img-fluid",attrs:{src:"/assets/images/logo.png",alt:"Theme-Logo"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row m-b-20"},[s("div",{staticClass:"col-md-12"},[s("h3",{staticClass:"text-center"},[t._v("Sign In")])])])}],i=(s("7f7f"),s("7514"),s("6b54"),s("6762"),s("a481"),s("96cf"),s("3b8d")),n=s("2b0e"),o=s("3d20"),l=s.n(o),c=s("a73b"),d=(s("bc3a"),{data:function(){return{username:"",password:"",submitted:!1,error:"",ApiUrls:c["a"]}},computed:{loggingIn:function(){},alert:function(){}},watch:{$route:function(t,e){}},mounted:function(){},created:function(){},methods:{resetPassword:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.fire({title:"Reset Password",text:"please enter your email so we can sent link reset password",input:"email",inputPlaceholder:"Enter the Email",showCancelButton:!0});case 2:e=t.sent,s=e.value,s&&(a=window.location.href.replace(this.$route.path,"/account/password/reset/"),this.$http.post("/user/resetpassword",{domain:a,email:s}).then((function(t){"00"==t.errorCode?l.a.fire("Success sent link!","Link already been sent to your email [".concat(s,"], please check your inbox!."),"success"):l.a.fire({title:"Failed!",text:"Failed reset password",type:"error",confirmButtonText:"Exit"})})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loginRequest:function(){var t=["Shoaib","Taufik","Babar","KSupportFP","Mirza","Wasim","Nauman","DanishIS","Amir"];if(t.includes(this.username))sessionStorage.setItem(this.ApiUrls.BASE_URL_KEY,"http://127.0.0.1:8090"),sessionStorage.setItem(this.ApiUrls.BASE_REPORT_URL_KEY,"http://127.0.0.1:12090"),sessionStorage.setItem(this.ApiUrls.BASE_PREPAID_URL_KEY,"http://127.0.0.1:8091"),this.$http.defaults.baseURL=sessionStorage.getItem(this.ApiUrls.BASE_URL_KEY).toString(),window.basePrepaidURL=sessionStorage.getItem(this.ApiUrls.BASE_PREPAID_URL_KEY).toString(),window.ReportBaseURL=sessionStorage.getItem(this.ApiUrls.BASE_REPORT_URL_KEY).toString();else{var e="http://".concat("127.0.0.1",":").concat("8090"),s="http://".concat("127.0.0.1",":").concat("12090"),a="http://".concat("10.248.9.73",":").concat("8091");console.log("BaseURL: ".concat(e)),console.log("BasePrepaidURL: ".concat(a)),console.log("ReportBaseUrl: ".concat(s)),sessionStorage.setItem(this.ApiUrls.BASE_URL_KEY,e),sessionStorage.setItem(this.ApiUrls.BASE_REPORT_URL_KEY,s),sessionStorage.setItem(this.ApiUrls.BASE_PREPAID_URL_KEY,a),this.$http.defaults.baseURL=e,window.basePrepaidURL=a,window.ReportBaseURL=s}return console.log("this.$http.defaults.baseURL: ",this.$http.defaults.baseURL),this.$http.post("/user/login",{username:this.username,password:this.password})},loadRolePermission:function(t){var e=this;this.$http.get("/permission/rolepermission").then((function(s){if("00"==s.errorCode){var a=s.data.find((function(e){return e.roleId==t.role})),r={role:a?a.roleId:"ADMIN",permissions:a?a.menuAccess:[]};t.is_admin||e.$store.commit("updateRolePermission",r)}})).catch((function(t){console.error("Error logging in",t)}))},handleSubmit:function(t){var e=this;this.submitted=!0;var s=this,a=(this.username,this.password,this.$store.dispatch),r={};this.$validator.validateAll().then((function(t){t&&e.loginRequest().then((function(t){if("15"==t.errorCode)s.$store.commit("notis/setAlert",{type:"warning",title:t.errorDescription,time:"20",message:t.errorMsg});else if("00"==t.errorCode){r={is_auth:1,is_admin:"ADMIN"==t.data.role?1:0,is_superadmin:"SUPERADMIN"==t.data.role?1:0,is_changepasswordrequired:1==t.data.forceChangePassword?1:0,token:t.data.authToken,user:{id:t.data.id,name:t.data.name,email:t.data.email,company:t.data.company,username:t.data.username},role:t.data.role,forceChangePassword:t.data.forceChangePassword,permissions:[]},a("login",r);var i={role:t.data.role,permissions:[]};e.$store.commit("updateRolePermission",i),1==r.forceChangePassword?e.$router.push({name:"changePassword"}):e.$router.push({name:"fpUserType"})}else e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})})).catch((function(t){console.error("Error logging in",t)}))}))},loadCompanyAdminDetail:function(t,e){var s=this;n["default"].$http.get("/master/getmasterbycompany/"+t.user.company.id).then((function(a){"00"==a.errorCode&&(t.user.company.msisdn=null,t.user.company.totalBalance=0,a.data.length>0&&(t.user.company.msisdn=a.data[0].msisdn,t.user.company.totalBalance=a.data[0].totalBalance),s.$store.commit("updateCompany",{msisdn:t.user.company.msisdn,totalBalance:t.user.company.totalBalance}),s.$store.commit("updateRolePermission",e),s.$router.push({name:"fpUserType"}))}))}}}),u=d,p=(s("b01b"),s("2877")),m=s("6544"),h=s.n(m),f=s("8336"),v=s("0e8f"),C=s("2677"),P=Object(p["a"])(u,a,r,!1,null,"cdd78c10",null);e["default"]=P.exports;h()(P,{VBtn:f["a"],VFlex:v["a"],VTextField:C["a"]})},"7ea4":function(t,e,s){"use strict";s("eec7")},9323:function(t,e,s){},b01b:function(t,e,s){"use strict";s("9323")},b8e1:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card col-md-4 p-3"},[s("div",{staticClass:"card-block text-xs-center"},[s("h5",[t._v("Select FP Type")]),s("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[s("v-flex",{attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{attrs:{type:"submit",round:"",disabled:t.loading,color:"#3498db",dark:""},on:{click:function(e){return t.chooseFPUserType(t.fpUserTypes.POSTPAID)}}},[t._v("Postpaid FP")]),s("v-btn",{attrs:{type:"submit",round:"",disabled:t.loading,color:"#3498db",dark:""},on:{click:function(e){return t.chooseFPUserType(t.fpUserTypes.PREPAID)}}},[t._v("Prepaid FP")])],1)],1)],1)])},r=[],i=s("96ca"),n={data:function(){return{loading:!1,fpUserTypes:i["a"]}},computed:{},watch:{},mounted:function(){sessionStorage.removeItem(this.fpUserTypes.STORAGE_KEY)},created:function(){},methods:{chooseFPUserType:function(t){sessionStorage.setItem(this.fpUserTypes.STORAGE_KEY,t),this.$router.push({name:"fpSearch"})}}},o=n,l=(s("2684"),s("2877")),c=s("6544"),d=s.n(c),u=s("8336"),p=s("0e8f"),m=s("a722"),h=Object(l["a"])(o,a,r,!1,null,"2d80672c",null);e["default"]=h.exports;d()(h,{VBtn:u["a"],VFlex:p["a"],VLayout:m["a"]})},e546:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row m-5"},[s("div",{staticClass:"col-md-3"}),s("div",{staticClass:"col-md-6"},[s("form",{staticClass:"md-float-material form-material",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-block p-5"},[t._m(0),s("div",{staticClass:"form-group form-primary"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",name:"Password","data-vv-name":"Password","error-messages":t.errors.collect("Password"),label:"Password",focus:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("div",{staticClass:"form-group form-primary"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",name:"NewPassword","data-vv-name":"New Password","error-messages":t.errors.collect("New Password"),label:"New Password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),s("div",{staticClass:"form-group form-primary"},[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:"+t.newPassword,expression:"`required|confirmed:${newPassword}`"}],attrs:{type:"password",name:"ConfirmPassword","data-vv-name":"Confirm Password","error-messages":t.errors.collect("Confirm Password"),label:"Confirm Password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)],1),s("v-flex",{staticClass:"text-center",attrs:{xs12:"","px-4":"","py-2":""}},[s("v-btn",{attrs:{type:"submit",round:"",disabled:t.changing,color:"#3498db",dark:""}},[t._v("Submit")])],1),s("hr")],1)])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row m-b-20"},[s("div",{staticClass:"col-md-12"},[s("h3",{staticClass:"text-center"},[t._v("Change Password")])])])}],i=s("2b0e"),n=(s("3d20"),s("bc3a"),{data:function(){return{password:"",confirmPassword:"",newPassword:"",submitted:!1,error:"",changing:!1}},computed:{},watch:{},mounted:function(){},created:function(){},methods:{handleSubmit:function(t){var e=this;this.$validator.validateAll().then((function(t){var s={currentPassword:e.password,newPassword:e.newPassword};i["default"].$http.post("/user/changeUserPassword",s).then((function(t){"00"==t.errorCode?(e.$store.commit("notis/setAlert",{type:"success",title:t.errorMsg,time:"4"}),sessionStorage.setItem("is_changepasswordrequired",0),window.location.href="/"):e.$store.commit("notis/setAlert",{type:"error",title:t.errorMsg,time:"4"})}))}))}}}),o=n,l=s("2877"),c=s("6544"),d=s.n(c),u=s("8336"),p=s("0e8f"),m=s("2677"),h=Object(l["a"])(o,a,r,!1,null,"07ca5f26",null);e["default"]=h.exports;d()(h,{VBtn:u["a"],VFlex:p["a"],VTextField:m["a"]})},e781:function(t,e,s){"use strict";s("ee67")},e7aa:function(t,e,s){},ee67:function(t,e,s){},eec7:function(t,e,s){},ef16:function(t,e,s){"use strict";s("0d5f")},f349:function(t,e,s){"use strict";s("e7aa")}}]);